{"ast":null,"code":"import React,{useState,useContext}from\"react\";import\"./booking.css\";import{Form,FormGroup,ListGroup,ListGroupItem,Button}from\"reactstrap\";import{useNavigate}from\"react-router-dom\";import{AuthContext}from\"../../context/AuthContext\";import{BASE_URL}from\"../../utils/config\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Booking=_ref=>{let{car,avgRating}=_ref;const{price,reviews,title}=car;const navigate=useNavigate();const{user}=useContext(AuthContext);const[booking,setBooking]=useState({userId:user&&user._id,userEmail:user&&user.email,carName:title,fullName:\"\",phone:\"\",guestSize:1,bookAt:\"\"});const handleChange=e=>{setBooking(prev=>({...prev,[e.target.id]:e.target.value}));};const serviceFee=10;const totalAmount=Number(price)*Number(booking.guestSize)+Number(serviceFee);const handleClick=async e=>{e.preventDefault();console.log(booking);try{if(!user||user==undefined||user==null){return alert(\"Please sign in\");}const res=await fetch(\"\".concat(BASE_URL,\"/booking\"),{method:\"post\",headers:{\"content-type\":\"application/json\"},credentials:\"include\",body:JSON.stringify(booking)});const result=await res.json();if(!res.ok){return alert(result.message);}navigate(\"/thank-you\");}catch(err){alert(err.message);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"booking\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"booking__top d-flex align-items-center justify-content-between\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"$\",price,/*#__PURE__*/_jsx(\"span\",{children:\"/per person\"})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"car__rating d-flex align-items-center\",children:[/*#__PURE__*/_jsx(\"i\",{class:\"ri-star-s-fill\"}),avgRating==0?null:avgRating,\" (\",reviews===null||reviews===void 0?void 0:reviews.length,\")\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"booking__form\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Information\"}),/*#__PURE__*/_jsxs(Form,{className:\"booking__info-form\",onSubmit:handleClick,children:[/*#__PURE__*/_jsx(FormGroup,{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Full name\",id:\"fullName\",required:true,onChange:handleChange})}),/*#__PURE__*/_jsx(FormGroup,{children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"Phone\",id:\"phone\",required:true,onChange:handleChange})}),/*#__PURE__*/_jsxs(FormGroup,{className:\"d-flex align-items-center gap-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"date\",placeholder:\"\",id:\"bookAt\",required:true,onChange:handleChange}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"Guest\",id:\"guestSize\",required:true,onChange:handleChange})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"booking__bottom\",children:[/*#__PURE__*/_jsxs(ListGroup,{children:[/*#__PURE__*/_jsxs(ListGroupItem,{className:\"border-0 px-0\",children:[/*#__PURE__*/_jsxs(\"h5\",{className:\"d-flex align-items-center gap-1\",children:[\"$\",price,\" \",/*#__PURE__*/_jsx(\"i\",{class:\"ri-close-line\"}),\" 1 person\"]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",price]})]}),/*#__PURE__*/_jsxs(ListGroupItem,{className:\"border-0 px-0\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Service Charge\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",serviceFee]})]}),/*#__PURE__*/_jsxs(ListGroupItem,{className:\"border-0 px-0 total\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Total\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",totalAmount]})]})]}),/*#__PURE__*/_jsx(Button,{className:\"btn primary__btn w-100 mt-4\",onClick:handleClick,children:\"Book Now\"})]})]});};export default Booking;","map":{"version":3,"names":["React","useState","useContext","Form","FormGroup","ListGroup","ListGroupItem","Button","useNavigate","AuthContext","BASE_URL","Booking","car","avgRating","price","reviews","title","navigate","user","booking","setBooking","userId","_id","userEmail","email","carName","fullName","phone","guestSize","bookAt","handleChange","e","prev","target","id","value","serviceFee","totalAmount","Number","handleClick","preventDefault","console","log","undefined","alert","res","fetch","method","headers","credentials","body","JSON","stringify","result","json","ok","message","err","length"],"sources":["C:/Users/geosh/Documents/GitHub/Project-CarDealership-Fsd/frontend/src/components/Booking/Booking.jsx"],"sourcesContent":["import React, { useState, useContext } from \"react\";\nimport \"./booking.css\";\nimport { Form, FormGroup, ListGroup, ListGroupItem, Button } from \"reactstrap\";\nimport { useNavigate } from \"react-router-dom\";\nimport { AuthContext } from \"../../context/AuthContext\";\nimport { BASE_URL } from \"../../utils/config\";\n\nconst Booking = ({ car, avgRating }) => {\n  const { price, reviews, title } = car;\n  const navigate = useNavigate();\n\n  const { user } = useContext(AuthContext);\n\n  const [booking, setBooking] = useState({\n    userId: user && user._id,\n    userEmail: user && user.email,\n    carName: title,\n    fullName: \"\",\n    phone: \"\",\n    guestSize: 1,\n    bookAt: \"\",\n  });\n\n  const handleChange = (e) => {\n    setBooking((prev) => ({ ...prev, [e.target.id]: e.target.value }));\n  };\n\n  const serviceFee = 10;\n  const totalAmount =\n    Number(price) * Number(booking.guestSize) + Number(serviceFee);\n\n  const handleClick = async (e) => {\n    e.preventDefault();\n\n    console.log(booking);\n\n    try {\n      if (!user || user == undefined || user == null) {\n        return alert(\"Please sign in\");\n      }\n      const res = await fetch(`${BASE_URL}/booking`, {\n        method: \"post\",\n        headers: { \"content-type\": \"application/json\" },\n        credentials: \"include\",\n        body: JSON.stringify(booking),\n      });\n      const result = await res.json();\n\n      if (!res.ok) {\n        return alert(result.message);\n      }\n      navigate(\"/thank-you\");\n    } catch (err) {\n      alert(err.message);\n    }\n  };\n\n  return (\n    <div className=\"booking\">\n      <div className=\"booking__top d-flex align-items-center justify-content-between\">\n        <h3>\n          ${price}\n          <span>/per person</span>\n        </h3>\n        <span className=\"car__rating d-flex align-items-center\">\n          <i class=\"ri-star-s-fill\"></i>\n          {avgRating == 0 ? null : avgRating} ({reviews?.length})\n        </span>\n      </div>\n      {/*================booking form===========*/}\n      <div className=\"booking__form\">\n        <h5>Information</h5>\n        <Form className=\"booking__info-form\" onSubmit={handleClick}>\n          <FormGroup>\n            <input\n              type=\"text\"\n              placeholder=\"Full name\"\n              id=\"fullName\"\n              required\n              onChange={handleChange}\n            />\n          </FormGroup>\n          <FormGroup>\n            <input\n              type=\"number\"\n              placeholder=\"Phone\"\n              id=\"phone\"\n              required\n              onChange={handleChange}\n            />\n          </FormGroup>\n          <FormGroup className=\"d-flex align-items-center gap-3\">\n            <input\n              type=\"date\"\n              placeholder=\"\"\n              id=\"bookAt\"\n              required\n              onChange={handleChange}\n            />\n            <input\n              type=\"number\"\n              placeholder=\"Guest\"\n              id=\"guestSize\"\n              required\n              onChange={handleChange}\n            />\n          </FormGroup>\n        </Form>\n      </div>\n      {/*================booking form end===========*/}\n\n      {/*================booking bottom===========*/}\n\n      <div className=\"booking__bottom\">\n        <ListGroup>\n          <ListGroupItem className=\"border-0 px-0\">\n            <h5 className=\"d-flex align-items-center gap-1\">\n              ${price} <i class=\"ri-close-line\"></i> 1 person\n            </h5>\n            <span>${price}</span>\n          </ListGroupItem>\n          <ListGroupItem className=\"border-0 px-0\">\n            <h5>Service Charge</h5>\n            <span>${serviceFee}</span>\n          </ListGroupItem>\n          <ListGroupItem className=\"border-0 px-0 total\">\n            <h5>Total</h5>\n            <span>${totalAmount}</span>\n          </ListGroupItem>\n        </ListGroup>\n        <Button className=\"btn primary__btn w-100 mt-4\" onClick={handleClick}>\n          Book Now\n        </Button>\n      </div>\n\n      {/*================booking bottom===========*/}\n    </div>\n  );\n};\n\nexport default Booking;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}