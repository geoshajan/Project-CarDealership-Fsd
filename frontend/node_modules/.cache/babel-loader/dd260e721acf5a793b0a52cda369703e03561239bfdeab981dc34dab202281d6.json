{"ast":null,"code":"import React,{useRef,useEffect,useContext,useState}from\"react\";import{Container,Row,Button}from\"reactstrap\";import{NavLink}from\"react-router-dom\";import{Link,useNavigate}from\"react-router-dom\";import logo from\"../../assets/images/logo.png\";import\"./header.css\";import{AuthContext}from\"../../context/AuthContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const navLinks=[{path:\"/home\",display:\"Home\"},{path:\"/about\",display:\"About\"},{path:\"/cars\",display:\"Cars\"}];const navAdminLinks=[{path:\"/adminHome\",display:\"Dashboard\"},{path:\"/users\",display:\"Users\"},{path:\"/carsadmin\",display:\"Cars\"},{path:\"/bookings\",display:\"Bookings\"}];// ... (previous code)\nconst Header=()=>{const headerRef=useRef(null);const menuRef=useRef(null);const navigate=useNavigate();const{user,dispatch}=useContext(AuthContext);const[userRole,setUserRole]=useState(null);const logout=()=>{dispatch({type:\"LOGOUT\"});navigate(\"/\");window.location.reload();};const getUserRole=()=>{try{console.log(\"User object:\",user);if(user&&user.username===\"Admin\"){setUserRole(\"admin\");}else{console.log(\"user is\",user.username);setUserRole(\"user\");}}catch(error){console.error(\"Error fetching user role:\",error);}};const stickyHeaderFunc=()=>{window.addEventListener(\"scroll\",()=>{if(document.body.scrollTop>80||document.documentElement.scrollTop>80){headerRef.current.classList.add(\"sticky__header\");}else{headerRef.current.classList.remove(\"sticky__header\");}});};useEffect(()=>{stickyHeaderFunc();getUserRole();return()=>window.removeEventListener(\"scroll\",stickyHeaderFunc);},[user]);const toggleMenu=()=>menuRef.current.classList.toggle(\"show__menu\");useEffect(()=>{// Update userRole when the user changes (after login or logout)\ngetUserRole();},[user]);return/*#__PURE__*/_jsx(\"header\",{className:\"header\",ref:headerRef,children:/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"nav_wrapper d-flex align-items-center justify-content-between\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"logo\",children:/*#__PURE__*/_jsx(\"img\",{src:logo,alt:\"\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"navigation\",ref:menuRef,onClick:toggleMenu,children:/*#__PURE__*/_jsx(\"ul\",{className:\"menu d-flex align-items-center gap-5\",children:userRole===\"admin\"?navAdminLinks.map((item,index)=>/*#__PURE__*/_jsx(\"li\",{className:\"nav__item\",children:/*#__PURE__*/_jsx(NavLink,{to:item.path,className:navClass=>navClass.isActive?\"active__link\":\"\",children:item.display})},index)):navLinks.map((item,index)=>/*#__PURE__*/_jsx(\"li\",{className:\"nav__item\",children:/*#__PURE__*/_jsx(NavLink,{to:item.path,className:navClass=>navClass.isActive?\"active__link\":\"\",children:item.display})},index))})}),/*#__PURE__*/_jsxs(\"div\",{className:\"nav__right d-flex align-items-center gap-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"nav__btns d-flex align-items-center gap-4\",children:user?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h5\",{className:\"mb-0\",children:user.username}),/*#__PURE__*/_jsx(Button,{className:\"btn btn-dark\",onClick:logout,children:\"Logout\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{className:\"btn secondary__btn\",children:/*#__PURE__*/_jsx(Link,{to:\"/login\",children:\"Login\"})}),/*#__PURE__*/_jsx(Button,{className:\"btn primary__btn\",children:/*#__PURE__*/_jsx(Link,{to:\"/register\",children:\"Register\"})})]})}),/*#__PURE__*/_jsx(\"span\",{className:\"mobile__menu\",onClick:toggleMenu,children:/*#__PURE__*/_jsx(\"i\",{className:\"ri-menu-line\"})})]})]})})})});};export default Header;","map":{"version":3,"names":["React","useRef","useEffect","useContext","useState","Container","Row","Button","NavLink","Link","useNavigate","logo","AuthContext","navLinks","path","display","navAdminLinks","Header","headerRef","menuRef","navigate","user","dispatch","userRole","setUserRole","logout","type","window","location","reload","getUserRole","console","log","username","error","stickyHeaderFunc","addEventListener","document","body","scrollTop","documentElement","current","classList","add","remove","removeEventListener","toggleMenu","toggle","map","item","index","navClass","isActive"],"sources":["C:/Users/geosh/Documents/GitHub/Project-CarDealership-Fsd/frontend/src/components/header/Header.jsx"],"sourcesContent":["import React, { useRef, useEffect, useContext, useState } from \"react\";\nimport { Container, Row, Button } from \"reactstrap\";\nimport { NavLink } from \"react-router-dom\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport logo from \"../../assets/images/logo.png\";\nimport \"./header.css\";\nimport { AuthContext } from \"../../context/AuthContext\";\n\nconst navLinks = [\n  {\n    path: \"/home\",\n    display: \"Home\",\n  },\n  {\n    path: \"/about\",\n    display: \"About\",\n  },\n  {\n    path: \"/cars\",\n    display: \"Cars\",\n  },\n];\n\nconst navAdminLinks = [\n  {\n    path: \"/adminHome\",\n    display: \"Dashboard\",\n  },\n  {\n    path: \"/users\",\n    display: \"Users\",\n  },\n  {\n    path: \"/carsadmin\",\n    display: \"Cars\",\n  },\n  {\n    path: \"/bookings\",\n    display: \"Bookings\",\n  },\n];\n// ... (previous code)\n\nconst Header = () => {\n  const headerRef = useRef(null);\n  const menuRef = useRef(null);\n  const navigate = useNavigate();\n  const { user, dispatch } = useContext(AuthContext);\n  const [userRole, setUserRole] = useState(null);\n\n  const logout = () => {\n    dispatch({ type: \"LOGOUT\" });\n    navigate(\"/\");\n    window.location.reload()\n  };\n\n  const getUserRole = () => {\n    try {\n      console.log(\"User object:\", user);\n      if (user && user.username === \"Admin\") {\n        setUserRole(\"admin\");\n      } else {\n        console.log(\"user is\", user.username);\n        setUserRole(\"user\");\n      }\n    } catch (error) {\n      console.error(\"Error fetching user role:\", error);\n    }\n  };\n\n  const stickyHeaderFunc = () => {\n    window.addEventListener(\"scroll\", () => {\n      if (\n        document.body.scrollTop > 80 ||\n        document.documentElement.scrollTop > 80\n      ) {\n        headerRef.current.classList.add(\"sticky__header\");\n      } else {\n        headerRef.current.classList.remove(\"sticky__header\");\n      }\n    });\n  };\n\n  useEffect(() => {\n    stickyHeaderFunc();\n    getUserRole();\n    return () => window.removeEventListener(\"scroll\", stickyHeaderFunc);\n  }, [user]);\n\n  const toggleMenu = () => menuRef.current.classList.toggle(\"show__menu\");\n\n  useEffect(() => {\n    // Update userRole when the user changes (after login or logout)\n    getUserRole();\n  }, [user]);\n\n  return (\n    <header className=\"header\" ref={headerRef}>\n      <Container>\n        <Row>\n          <div className=\"nav_wrapper d-flex align-items-center justify-content-between\">\n            <div className=\"logo\">\n              <img src={logo} alt=\"\" />\n            </div>\n            <div className=\"navigation\" ref={menuRef} onClick={toggleMenu}>\n              <ul className=\"menu d-flex align-items-center gap-5\">\n                {userRole === \"admin\"\n                  ? navAdminLinks.map((item, index) => (\n                      <li className=\"nav__item\" key={index}>\n                        <NavLink\n                          to={item.path}\n                          className={(navClass) =>\n                            navClass.isActive ? \"active__link\" : \"\"\n                          }\n                        >\n                          {item.display}\n                        </NavLink>\n                      </li>\n                    ))\n                  : navLinks.map((item, index) => (\n                      <li className=\"nav__item\" key={index}>\n                        <NavLink\n                          to={item.path}\n                          className={(navClass) =>\n                            navClass.isActive ? \"active__link\" : \"\"\n                          }\n                        >\n                          {item.display}\n                        </NavLink>\n                      </li>\n                    ))}\n              </ul>\n            </div>\n            <div className=\"nav__right d-flex align-items-center gap-4\">\n              <div className=\"nav__btns d-flex align-items-center gap-4\">\n                {user ? (\n                  <>\n                    <h5 className=\"mb-0\">{user.username}</h5>\n                    <Button className=\"btn btn-dark\" onClick={logout}>\n                      Logout\n                    </Button>\n                  </>\n                ) : (\n                  <>\n                    <Button className=\"btn secondary__btn\">\n                      <Link to=\"/login\">Login</Link>\n                    </Button>\n                    <Button className=\"btn primary__btn\">\n                      <Link to=\"/register\">Register</Link>\n                    </Button>\n                  </>\n                )}\n              </div>\n              <span className=\"mobile__menu\" onClick={toggleMenu}>\n                <i className=\"ri-menu-line\"></i>\n              </span>\n            </div>\n          </div>\n        </Row>\n      </Container>\n    </header>\n  );\n};\n\nexport default Header;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}